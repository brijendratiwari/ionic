{"version":3,"sources":["webpack:///src/app/pet/pet.module.ts","webpack:///src/app/pet/pet.page.ts","webpack:///src/app/pet/pet.page.scss","webpack:///src/app/pet/pet.page.html"],"names":["routes","path","component","PetPage","PetPageModule","NgModule","imports","CommonModule","FormsModule","IonicModule","RouterModule","declarations","api","storage","router","navCtrl","isPetAvailable","petList","isAPILoaded","getPetsListing","showLoader","get","PetcloudApiService","then","userData","console","log","getPetList","id","pipe","finalize","hideLoader","subscribe","res","success","pets","length","showToast","err","autoLogout","petId","petObj","index","showAlert","text","role","cssClass","handler","blah","info","deletePet","i","splice","error","openExteralLinks","FRESHDESK_WEB","Storage","Router","NavController","Component","selector","template"],"mappings":"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","file":"src_app_pet_pet_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PetPage } from './pet.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PetPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PetPage]\n})\nexport class PetPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { PetcloudApiService } from '../api/petcloud-api.service';\nimport { Storage } from '@ionic/storage';\nimport { Router } from '@angular/router';\nimport { User } from '../model/user';\nimport { finalize } from 'rxjs/operators';\nimport { NavController } from '@ionic/angular';\n\n@Component({\n    selector: 'app-pet',\n    templateUrl: './pet.page.html',\n    styleUrls: ['./pet.page.scss'],\n})\nexport class PetPage implements OnInit {\n\n    public isPetAvailable: boolean = false;\n    public petList: any = [];\n    isAPILoaded: boolean = false;\n\n    constructor(public api: PetcloudApiService, protected storage: Storage,\n         protected router: Router,public navCtrl: NavController) {\n    }\n\n    ngOnInit() {\n    }\n\n    ionViewDidEnter() {\n        // fetch pet listings\n        this.getPetsListing();\n    }\n\n    /**\n     * Get Pet List\n     */\n    public  getPetsListing() {\n        this.api.showLoader();\n        this.storage.get(PetcloudApiService.USER)\n            .then((userData: User) => {\n                console.log(userData);\n                this.api.getPetList(userData.id).pipe(\n                    finalize(() => {\n                        this.api.hideLoader();\n                    }))\n                    .subscribe((res: any) => {\n                        this.isAPILoaded = true;\n                        if (res.success) {\n                            if (res.pets.length > 0) {\n                                this.isPetAvailable = true;\n                                this.petList = res.pets; // assign list object to local variable.\n                            } else {\n                                this.isPetAvailable = false;\n                            }\n                        } else {\n                            this.api.showToast('No pet found! add new family member', 200, 'bottom');\n                        }\n                    }, (err: any) => {\n                        this.api.hideLoader();\n                        this.api.showToast('No pet found! add new family member', 2000, 'bottom');\n                          this.api.autoLogout(err,userData.id)\n                    });\n            }, (err: any) => {\n                this.isAPILoaded = true;\n                // this.api.autoLogout(err)\n            });\n    }\n\n    /**\n     * Delete Pet\n     */\n    public deletePet(petId: any, petObj: any,index) {\n        this.api.showAlert('Delete', 'Are you sure to delete this pet?', [\n            {\n                text: 'Cancel',\n                role: 'cancel',\n                cssClass: 'danger',\n                handler: (blah: any) => {\n                    console.info('user canceled logout');\n                }\n            }, {\n                text: 'Ok',\n                handler: () => {\n                    this.api.showLoader();\n                    // code for delete pets.\n                    this.api.deletePet(petId).pipe(\n                        finalize(() => {\n                            this.api.hideLoader();\n                        }))\n                        .subscribe((res: any) => {\n                            if (res.success) {\n                                for (let i = 0; i < this.petList.length; i++) {\n                                    if (this.petList[i] == petObj) {\n                                        this.petList.splice(i, 1);\n                                    }\n                                }\n                                \n                                if(!this.petList.length){\n                                    this.isPetAvailable = false;\n                                }\n                            }else{\n                                this.api.showToast(res.error, 200, 'bottom');\n                            }\n                        }, (err: any) => {\n                            this.api.showToast('Pet not deleted.', 200, 'bottom');\n                            this.api.autoLogout(err,petId)\n                        });\n                }\n\n            }\n        ]);\n    }\n\n    needSupport(){\n        this.api.openExteralLinks(this.api.FRESHDESK_WEB)\n    }\n\n}\n","export default \".msg {\\n  font-weight: 600;\\n  text-align: center;\\n}\\n\\n.petList .petItem {\\n  border-bottom: 1px solid #e1e1e1;\\n}\\n\\n.petList .petItem .petProfile {\\n  --border-radius: 50%;\\n}\\n\\n.petList .petItem .petName {\\n  font-weight: 600;\\n  font-size: 16px;\\n  color: #4A4A4A;\\n  letter-spacing: 0;\\n  text-decoration: none;\\n}\\n\\nion-button.add-pet {\\n  margin: 0;\\n  letter-spacing: 0;\\n  font-size: 18px;\\n  text-transform: capitalize;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBldC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBR0U7RUFDRSxnQ0FBQTtBQUFKOztBQUNJO0VBQ0Usb0JBQUE7QUFDTjs7QUFFSTtFQUNFLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGNBQUE7RUFDQSxpQkFBQTtFQUNBLHFCQUFBO0FBQU47O0FBS0E7RUFDRSxTQUFBO0VBQ0EsaUJBQUE7RUFDQSxlQUFBO0VBQ0EsMEJBQUE7QUFGRiIsImZpbGUiOiJwZXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1zZyB7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnBldExpc3Qge1xuICAucGV0SXRlbSB7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMWUxZTE7XG4gICAgLnBldFByb2ZpbGUge1xuICAgICAgLS1ib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgfVxuXG4gICAgLnBldE5hbWUge1xuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIGNvbG9yOiAjNEE0QTRBO1xuICAgICAgbGV0dGVyLXNwYWNpbmc6IDA7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuICB9XG59XG5cbmlvbi1idXR0b24uYWRkLXBldCB7XG4gIG1hcmdpbjogMDtcbiAgbGV0dGVyLXNwYWNpbmc6IDA7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XG59XG4iXX0= */\";","export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"home/tabs/profile-menu\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>My Pets</ion-title>\\n\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button  (click)=\\\"needSupport()\\\" defaultHref=\\\"/home/tabs/profile-menu\\\">\\n              <img width=\\\"25px\\\" src=\\\"./assets/icon/solutions.png\\\" alt=\\\"\\\">\\n            </ion-button>\\n        </ion-buttons>\\n        \\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ng-container *ngIf=\\\"isAPILoaded\\\">\\n        <!-- if not pet -->\\n        <ion-grid *ngIf=\\\"isPetAvailable == false\\\">\\n            <ion-row class=\\\"ion-align-items-center h-80\\\">\\n                <ion-col size=\\\"8\\\" offset=\\\"2\\\" class=\\\"ion-text-center\\\">\\n                    <ion-img src=\\\"assets/icon/emptypet.svg\\\" class=\\\"ion-padding-bottom\\\"></ion-img>\\n                    <ion-text color=\\\"theme\\\" class=\\\"msg\\\">You haven’t enrolled your pet.</ion-text>\\n                </ion-col>\\n            </ion-row>\\n        </ion-grid>\\n        <!-- if pet found -->\\n        <ion-list *ngIf=\\\"isPetAvailable == true\\\" lines=\\\"none\\\" class=\\\"petList\\\">\\n            <ion-item *ngFor=\\\"let p of petList,let i=index\\\" class=\\\"petItem\\\">\\n                <ion-thumbnail slot=\\\"start\\\" class=\\\"petProfile\\\" [routerLink]=\\\"['/pet-view',p.id]\\\">\\n                    <ion-img\\n                            [src]=\\\"p.imagename == null || p.imagename == '' ? 'https://dev.petcloud.com.au/img/pet_placeholder.png' : p.imagename\\\"></ion-img>\\n                </ion-thumbnail>\\n                <ion-label [routerLink]=\\\"['/pet-view',p.id]\\\">\\n                    <a class=\\\"petName\\\">\\n                        {{p.name}}\\n                    </a>\\n                </ion-label>\\n                <ion-buttons>\\n                    <ion-button type=\\\"button\\\" (click)=\\\"deletePet(p.id,p,i)\\\">\\n                        <ion-icon slot=\\\"end\\\" src=\\\"assets/icon/trash.svg\\\"></ion-icon>\\n                    </ion-button>\\n                </ion-buttons>\\n            </ion-item>\\n        </ion-list>\\n    </ng-container>   \\n</ion-content>\\n\\n<ion-footer>\\n    <ion-button class=\\\"add-pet footer-btn\\\"\\n        expand=\\\"full\\\"\\n        color=\\\"theme\\\"\\n        routerLink=\\\"/pet-add\\\"\\n        expand=\\\"full\\\"\\n        color=\\\"theme\\\"\\n    >\\n        Add New Family Member\\n    </ion-button>\\n</ion-footer>\\n\";"]}