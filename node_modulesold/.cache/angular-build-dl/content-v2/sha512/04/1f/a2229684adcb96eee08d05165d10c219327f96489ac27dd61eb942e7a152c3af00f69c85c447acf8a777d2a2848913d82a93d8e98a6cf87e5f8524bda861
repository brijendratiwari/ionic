{"version":3,"sources":["./src/app/pet/pet.module.ts","./src/app/pet/pet.page.ts","./src/app/pet/pet.page.scss","./src/app/pet/pet.page.html"],"names":[],"mappings":"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","file":"src_app_pet_pet_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PetPage } from './pet.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PetPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PetPage]\n})\nexport class PetPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { PetcloudApiService } from '../api/petcloud-api.service';\nimport { Storage } from '@ionic/storage';\nimport { Router } from '@angular/router';\nimport { User } from '../model/user';\nimport { finalize } from 'rxjs/operators';\nimport { NavController } from '@ionic/angular';\n\n@Component({\n    selector: 'app-pet',\n    templateUrl: './pet.page.html',\n    styleUrls: ['./pet.page.scss'],\n})\nexport class PetPage implements OnInit {\n\n    public isPetAvailable: boolean = false;\n    public petList: any = [];\n    isAPILoaded: boolean = false;\n\n    constructor(public api: PetcloudApiService, protected storage: Storage,\n         protected router: Router,public navCtrl: NavController) {\n    }\n\n    ngOnInit() {\n    }\n\n    ionViewDidEnter() {\n        // fetch pet listings\n        this.getPetsListing();\n    }\n\n    /**\n     * Get Pet List\n     */\n    public  getPetsListing() {\n        this.api.showLoader();\n        this.storage.get(PetcloudApiService.USER)\n            .then((userData: User) => {\n                console.log(userData);\n                this.api.getPetList(userData.id).pipe(\n                    finalize(() => {\n                        this.api.hideLoader();\n                    }))\n                    .subscribe((res: any) => {\n                        this.isAPILoaded = true;\n                        if (res.success) {\n                            if (res.pets.length > 0) {\n                                this.isPetAvailable = true;\n                                this.petList = res.pets; // assign list object to local variable.\n                            } else {\n                                this.isPetAvailable = false;\n                            }\n                        } else {\n                            this.api.showToast('No pet found! add new family member', 200, 'bottom');\n                        }\n                    }, (err: any) => {\n                        this.api.hideLoader();\n                        this.api.showToast('No pet found! add new family member', 2000, 'bottom');\n                          this.api.autoLogout(err,userData.id)\n                    });\n            }, (err: any) => {\n                this.isAPILoaded = true;\n                // this.api.autoLogout(err)\n            });\n    }\n\n    /**\n     * Delete Pet\n     */\n    public deletePet(petId: any, petObj: any,index) {\n        this.api.showAlert('Delete', 'Are you sure to delete this pet?', [\n            {\n                text: 'Cancel',\n                role: 'cancel',\n                cssClass: 'danger',\n                handler: (blah: any) => {\n                    console.info('user canceled logout');\n                }\n            }, {\n                text: 'Ok',\n                handler: () => {\n                    this.api.showLoader();\n                    // code for delete pets.\n                    this.api.deletePet(petId).pipe(\n                        finalize(() => {\n                            this.api.hideLoader();\n                        }))\n                        .subscribe((res: any) => {\n                            if (res.success) {\n                                for (let i = 0; i < this.petList.length; i++) {\n                                    if (this.petList[i] == petObj) {\n                                        this.petList.splice(i, 1);\n                                    }\n                                }\n                                \n                                if(!this.petList.length){\n                                    this.isPetAvailable = false;\n                                }\n                            }else{\n                                this.api.showToast(res.error, 200, 'bottom');\n                            }\n                        }, (err: any) => {\n                            this.api.showToast('Pet not deleted.', 200, 'bottom');\n                            this.api.autoLogout(err,petId)\n                        });\n                }\n\n            }\n        ]);\n    }\n\n    needSupport(){\n        this.api.openExteralLinks(this.api.FRESHDESK_WEB)\n    }\n\n}\n","export default \".msg {\\n  font-weight: 600;\\n  text-align: center;\\n}\\n\\n.petList .petItem {\\n  border-bottom: 1px solid #e1e1e1;\\n}\\n\\n.petList .petItem .petProfile {\\n  --border-radius: 50%;\\n}\\n\\n.petList .petItem .petName {\\n  font-weight: 600;\\n  font-size: 16px;\\n  color: #4A4A4A;\\n  letter-spacing: 0;\\n  text-decoration: none;\\n}\\n\\nion-button.add-pet {\\n  margin: 0;\\n  letter-spacing: 0;\\n  font-size: 18px;\\n  text-transform: capitalize;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBldC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBR0U7RUFDRSxnQ0FBQTtBQUFKOztBQUNJO0VBQ0Usb0JBQUE7QUFDTjs7QUFFSTtFQUNFLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGNBQUE7RUFDQSxpQkFBQTtFQUNBLHFCQUFBO0FBQU47O0FBS0E7RUFDRSxTQUFBO0VBQ0EsaUJBQUE7RUFDQSxlQUFBO0VBQ0EsMEJBQUE7QUFGRiIsImZpbGUiOiJwZXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1zZyB7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnBldExpc3Qge1xuICAucGV0SXRlbSB7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMWUxZTE7XG4gICAgLnBldFByb2ZpbGUge1xuICAgICAgLS1ib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgfVxuXG4gICAgLnBldE5hbWUge1xuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIGNvbG9yOiAjNEE0QTRBO1xuICAgICAgbGV0dGVyLXNwYWNpbmc6IDA7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuICB9XG59XG5cbmlvbi1idXR0b24uYWRkLXBldCB7XG4gIG1hcmdpbjogMDtcbiAgbGV0dGVyLXNwYWNpbmc6IDA7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XG59XG4iXX0= */\";","export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"home/tabs/profile-menu\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>My Pets</ion-title>\\n\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button  (click)=\\\"needSupport()\\\" defaultHref=\\\"/home/tabs/profile-menu\\\">\\n              <img width=\\\"25px\\\" src=\\\"./assets/icon/solutions.png\\\" alt=\\\"\\\">\\n            </ion-button>\\n        </ion-buttons>\\n        \\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ng-container *ngIf=\\\"isAPILoaded\\\">\\n        <!-- if not pet -->\\n        <ion-grid *ngIf=\\\"isPetAvailable == false\\\">\\n            <ion-row class=\\\"ion-align-items-center h-80\\\">\\n                <ion-col size=\\\"8\\\" offset=\\\"2\\\" class=\\\"ion-text-center\\\">\\n                    <ion-img src=\\\"assets/icon/emptypet.svg\\\" class=\\\"ion-padding-bottom\\\"></ion-img>\\n                    <ion-text color=\\\"theme\\\" class=\\\"msg\\\">You haven’t enrolled your pet.</ion-text>\\n                </ion-col>\\n            </ion-row>\\n        </ion-grid>\\n        <!-- if pet found -->\\n        <ion-list *ngIf=\\\"isPetAvailable == true\\\" lines=\\\"none\\\" class=\\\"petList\\\">\\n            <ion-item *ngFor=\\\"let p of petList,let i=index\\\" class=\\\"petItem\\\">\\n                <ion-thumbnail slot=\\\"start\\\" class=\\\"petProfile\\\" [routerLink]=\\\"['/pet-view',p.id]\\\">\\n                    <ion-img\\n                            [src]=\\\"p.imagename == null || p.imagename == '' ? 'https://dev.petcloud.com.au/img/pet_placeholder.png' : p.imagename\\\"></ion-img>\\n                </ion-thumbnail>\\n                <ion-label [routerLink]=\\\"['/pet-view',p.id]\\\">\\n                    <a class=\\\"petName\\\">\\n                        {{p.name}}\\n                    </a>\\n                </ion-label>\\n                <ion-buttons>\\n                    <ion-button type=\\\"button\\\" (click)=\\\"deletePet(p.id,p,i)\\\">\\n                        <ion-icon slot=\\\"end\\\" src=\\\"assets/icon/trash.svg\\\"></ion-icon>\\n                    </ion-button>\\n                </ion-buttons>\\n            </ion-item>\\n        </ion-list>\\n    </ng-container>   \\n</ion-content>\\n\\n<ion-footer>\\n    <ion-button class=\\\"add-pet footer-btn\\\"\\n        expand=\\\"full\\\"\\n        color=\\\"theme\\\"\\n        routerLink=\\\"/pet-add\\\"\\n        expand=\\\"full\\\"\\n        color=\\\"theme\\\"\\n    >\\n        Add New Family Member\\n    </ion-button>\\n</ion-footer>\\n\";"],"sourceRoot":"webpack:///"}