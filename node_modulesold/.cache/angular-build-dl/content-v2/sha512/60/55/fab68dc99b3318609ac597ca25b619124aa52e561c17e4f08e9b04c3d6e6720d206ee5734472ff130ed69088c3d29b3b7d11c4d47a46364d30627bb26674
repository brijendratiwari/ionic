(self["webpackChunkpetcloud"] = self["webpackChunkpetcloud"] || []).push([["src_app_profile_profile-photo-upload_profile-photo-upload_module_ts"],{

/***/ 37425:
/*!*****************************************************************************!*\
  !*** ./src/app/profile/profile-photo-upload/profile-photo-upload.module.ts ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProfilePhotoUploadPageModule": function() { return /* binding */ ProfilePhotoUploadPageModule; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 38583);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ 3679);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/router */ 39895);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _profile_photo_upload_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./profile-photo-upload.page */ 6548);
/* harmony import */ var _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic-native/camera/ngx */ 84267);
/* harmony import */ var _ionic_native_file_ngx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic-native/file/ngx */ 20138);
/* harmony import */ var _ionic_native_file_transfer_ngx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic-native/file-transfer/ngx */ 97905);
/* harmony import */ var _ionic_native_ionic_webview_ngx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic-native/ionic-webview/ngx */ 24575);







// native plugins




const routes = [
    {
        path: '',
        component: _profile_photo_upload_page__WEBPACK_IMPORTED_MODULE_0__.ProfilePhotoUploadPage
    }
];
let ProfilePhotoUploadPageModule = class ProfilePhotoUploadPageModule {
};
ProfilePhotoUploadPageModule = (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.NgModule)({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_7__.CommonModule,
            _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormsModule,
            _ionic_angular__WEBPACK_IMPORTED_MODULE_9__.IonicModule,
            _angular_router__WEBPACK_IMPORTED_MODULE_10__.RouterModule.forChild(routes)
        ],
        providers: [
            _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_1__.Camera,
            _ionic_native_file_ngx__WEBPACK_IMPORTED_MODULE_2__.File,
            _ionic_native_file_transfer_ngx__WEBPACK_IMPORTED_MODULE_3__.FileTransfer,
            _ionic_native_ionic_webview_ngx__WEBPACK_IMPORTED_MODULE_4__.WebView,
        ],
        declarations: [_profile_photo_upload_page__WEBPACK_IMPORTED_MODULE_0__.ProfilePhotoUploadPage]
    })
], ProfilePhotoUploadPageModule);



/***/ }),

/***/ 6548:
/*!***************************************************************************!*\
  !*** ./src/app/profile/profile-photo-upload/profile-photo-upload.page.ts ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProfilePhotoUploadPage": function() { return /* binding */ ProfilePhotoUploadPage; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _raw_loader_profile_photo_upload_page_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !raw-loader!./profile-photo-upload.page.html */ 72177);
/* harmony import */ var _profile_photo_upload_page_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./profile-photo-upload.page.scss */ 58878);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../api/petcloud-api.service */ 78975);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _ionic_native_file_ngx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic-native/file/ngx */ 20138);
/* harmony import */ var _ionic_native_ionic_webview_ngx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic-native/ionic-webview/ngx */ 24575);
/* harmony import */ var _ionic_storage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ionic/storage */ 38605);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 68939);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/router */ 39895);
/* harmony import */ var _camera_service_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../camera-service.service */ 77836);
/* harmony import */ var _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ionic-native/camera/ngx */ 84267);







// native plugins







let ProfilePhotoUploadPage = class ProfilePhotoUploadPage {
    constructor(storage, navCtrl, webview, platform, actionSheetCtrl, router, route, camera, file, CameraAPI, api) {
        this.storage = storage;
        this.navCtrl = navCtrl;
        this.webview = webview;
        this.platform = platform;
        this.actionSheetCtrl = actionSheetCtrl;
        this.router = router;
        this.route = route;
        this.camera = camera;
        this.file = file;
        this.CameraAPI = CameraAPI;
        this.api = api;
        this.lastImage = null;
        this.todayDate = new Date();
        this.selectedProfileImage = 'assets/img/sitter1.png';
        this.isImage = false;
        this.backButton = "";
        this.backButton = this.route.snapshot.paramMap.get("backBtn");
        this.getUserProfilePhoto();
    }
    ngOnInit() {
        this.checkVerification();
    }
    ionViewWillLeave() {
        this.api.hideLoader();
    }
    ionViewDidLeave() {
        this.api.hideLoader();
    }
    getUserProfilePhoto() {
        this.storage.get(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__.PetcloudApiService.USER)
            .then((res) => {
            this.userData = res;
            if (this.userData.imagename !== '' || this.userData.imagename !== null) {
                this.isImage = false;
                this.myImageUrl = this.userData.imagename;
                this.prevImageURL = this.userData.imagename;
            }
            else {
                this.isImage = true;
            }
        }, (err) => {
            console.log('user not found!');
        });
    }
    // Always get the accurate path to your apps folder
    pathForImage(img) {
        if (img === null) {
            return '';
        }
        else {
            const converted = this.webview.convertFileSrc(img);
            return converted;
        }
    }
    showActionSheet() {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__awaiter)(this, void 0, void 0, function* () {
            yield this.platform.ready();
            const actionSheet = yield this.actionSheetCtrl.create({
                header: 'Select Photo From',
                buttons: [{
                        text: 'Camera',
                        handler: () => {
                            this.photoOption(this.camera.PictureSourceType.CAMERA);
                        }
                    }, {
                        text: 'Gallery',
                        handler: () => (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__awaiter)(this, void 0, void 0, function* () {
                            const status = yield this.CameraAPI.checkPhotoLibraryPermission();
                            if (status) {
                                this.photoOption(this.camera.PictureSourceType.PHOTOLIBRARY);
                            }
                        })
                    }, {
                        text: 'Cancel'
                    }]
            });
            yield actionSheet.present();
        });
    }
    photoOption(params) {
        this.CameraAPI.getPicture(params).then((base64String) => {
            this.myImageUrl = 'data:image/jpeg;base64,' + base64String;
            this.imageUpload();
        }, err => {
            console.error("err", err);
        });
    }
    imageUpload() {
        if (this.myImageUrl == "https://cdn.petcloud.com.au/uploads/user/") {
            this.api.showToast("please upload profile pic", "2000", "bottom");
        }
        else if (this.selectedProfileImage != "" && this.myImageUrl == undefined && this.isImage) {
            if (this.isPhoneVerify && this.isEmailVerify) {
                this.router.navigateByUrl('/home/tabs/profile-menu', { skipLocationChange: true });
            }
            else {
                this.router.navigate([
                    "/profile-photo-upload",
                    { backBtn: true },
                ]);
            }
        }
        else {
            const fileParams = { data: this.myImageUrl, name: "Imagename.jpg", };
            // Same Image from Storage Conditon..
            if (fileParams.data == this.prevImageURL) {
                if (this.isPhoneVerify && this.isEmailVerify) {
                    this.router.navigateByUrl('/home/tabs/profile-menu', { skipLocationChange: true });
                }
                else if (this.isEmailVerify == false || this.isPhoneVerify == false) {
                    this.router.navigate(['/profile-email-verify', { backBtn: true }]);
                }
                else if (this.isEmailVerify == undefined || this.isPhoneVerify == undefined) {
                    this.router.navigate(['/profile-email-verify', { backBtn: true }]);
                }
            }
            else {
                this.api.showLoader();
                this.api.userImageUpload(fileParams).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.finalize)(() => {
                    this.api.hideLoader();
                }))
                    .subscribe((res) => {
                    if (res.success) {
                        this.uploadUrl = res.uploadUrl;
                        // Update Image..
                        this.storage.get(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__.PetcloudApiService.USER)
                            .then((userData) => {
                            this.storage.set(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__.PetcloudApiService.USER, userData);
                        });
                        this.api.showToast('Photo Uploaded.', 2000, 'bottom');
                        if (this.isPhoneVerify && this.isEmailVerify) {
                            this.router.navigateByUrl('/home/tabs/profile-menu');
                        }
                        else if (this.isEmailVerify == false || this.isPhoneVerify == false) {
                            this.router.navigate(['/profile-email-verify', { backBtn: true }]);
                        }
                        else if (this.isEmailVerify == undefined || this.isPhoneVerify == undefined) {
                            this.router.navigate(['/profile-email-verify', { backBtn: true }]);
                        }
                        else {
                            this.router.navigateByUrl('/home/tabs/profile-menu');
                        }
                    }
                    else {
                        this.api.showToast('Filed to add photo.', 2000, 'bottom');
                    }
                }, (err) => {
                    this.api.autoLogout(err, fileParams);
                });
            }
        }
    }
    backButtonNavigate() {
        if (this.backButton) {
            this.router.navigateByUrl('/home/tabs/sitter-listing');
        }
        else {
            this.navCtrl.pop();
        }
    }
    checkVerification() {
        this.api.checkVerification().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.finalize)(() => {
            // this.api.showToast('something went wrong! please Try again.', 2000, 'bottom');
        })).subscribe((res) => {
            this.verificationResponse = res;
            if (res.emailVerify.status == "1") {
                this.isEmailVerify = true;
            }
            else if (res.emailVerify.status != "0") {
                this.isEmailVerify = false;
            }
            if (res.phoneVerify.verify_phoneflag == "Y") {
                this.isPhoneVerify = true;
            }
            else if (res.phoneVerify.verify_phoneflag != "N") {
                this.isPhoneVerify == false;
            }
        }, err => {
            this.api.autoLogout(err, "");
        });
    }
};
ProfilePhotoUploadPage.ctorParameters = () => [
    { type: _ionic_storage__WEBPACK_IMPORTED_MODULE_9__.Storage },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_10__.NavController },
    { type: _ionic_native_ionic_webview_ngx__WEBPACK_IMPORTED_MODULE_4__.WebView },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_10__.Platform },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_10__.ActionSheetController },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_11__.Router },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_11__.ActivatedRoute },
    { type: _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_6__.Camera },
    { type: _ionic_native_file_ngx__WEBPACK_IMPORTED_MODULE_3__.File },
    { type: _camera_service_service__WEBPACK_IMPORTED_MODULE_5__.CameraService },
    { type: _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__.PetcloudApiService }
];
ProfilePhotoUploadPage = (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_12__.Component)({
        selector: 'app-profile-photo-upload',
        template: _raw_loader_profile_photo_upload_page_html__WEBPACK_IMPORTED_MODULE_0__.default,
        styles: [_profile_photo_upload_page_scss__WEBPACK_IMPORTED_MODULE_1__.default]
    })
], ProfilePhotoUploadPage);



/***/ }),

/***/ 58878:
/*!*****************************************************************************!*\
  !*** ./src/app/profile/profile-photo-upload/profile-photo-upload.page.scss ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (".profileimg {\n  width: 150px;\n  height: 150px;\n  display: block;\n  margin: 0 auto;\n  border-radius: 50%;\n  border: 1px solid #c2c2c2;\n}\n.profileimg ion-avatar {\n  width: 150px;\n  height: 150px;\n  margin: 0 auto;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2ZpbGUtcGhvdG8tdXBsb2FkLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0EsY0FBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0FBQ0o7QUFBSTtFQUNFLFlBQUE7RUFDQSxhQUFBO0VBQ0EsY0FBQTtBQUVOIiwiZmlsZSI6InByb2ZpbGUtcGhvdG8tdXBsb2FkLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcm9maWxlaW1nIHtcbiAgICB3aWR0aDogMTUwcHg7XG4gICAgaGVpZ2h0OiAxNTBweDtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2MyYzJjMjtcbiAgICBpb24tYXZhdGFye1xuICAgICAgd2lkdGg6IDE1MHB4O1xuICAgICAgaGVpZ2h0OiAxNTBweDtcbiAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIH1cbn1cbiJdfQ== */");

/***/ }),

/***/ 72177:
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/profile/profile-photo-upload/profile-photo-upload.page.html ***!
  \*******************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button (click)=\"backButtonNavigate()\" defaultHref=\"home\"   ></ion-back-button>\n        </ion-buttons>\n        <ion-title>Upload Photo</ion-title>\n    </ion-toolbar>\n</ion-header>\n\n\n<ion-content>\n    <ion-grid>\n        <ion-row class=\"ion-justify-content-center\">\n            <ion-col size=12 class=\"ion-text-justify\">\n                <div class=\"profileimg\">\n                    <ion-avatar>\n                        <ion-img *ngIf=\"myImageUrl != ''\" \n                        [src]=\"myImageUrl\"></ion-img>\n                    </ion-avatar>\n                </div>\n            </ion-col>\n            <ion-col>\n                <div class=\"ion-text-center ion-padding-top\">\n                    <ion-button class=\"text-capitalize fls-0 fs-16\" size=\"large\" color=\"theme\" (click)=\"showActionSheet()\">Upload Image</ion-button>\n                </div>\n                <div class=\"ion-text-center\">\n                    <small>This must be a clear photo of your face. <br>Not a picture of a Pet or\n                        your Business Logo\n                    </small>\n                </div>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n</ion-content>\n\n<ion-footer>\n    <ion-button class=\"text-capitalize fls-0 fs-18 footer-btn\" \n        expand=\"full\" color=\"theme\" \n        (click)=\"imageUpload()\"\n    >\n        Next\n    </ion-button>\n</ion-footer>\n");

/***/ })

}]);
//# sourceMappingURL=src_app_profile_profile-photo-upload_profile-photo-upload_module_ts-es2015.js.map