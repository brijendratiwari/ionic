(self["webpackChunkpetcloud"] = self["webpackChunkpetcloud"] || []).push([["src_app_notification_notification_module_ts"],{

/***/ 81923:
/*!***********************************************************************************!*\
  !*** ./src/app/notification/notification-detail/notification-detail.component.ts ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NotificationDetailComponent": function() { return /* binding */ NotificationDetailComponent; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _raw_loader_notification_detail_component_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !raw-loader!./notification-detail.component.html */ 71308);
/* harmony import */ var _notification_detail_component_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./notification-detail.component.scss */ 64849);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/petcloud-api.service */ 78975);






let NotificationDetailComponent = class NotificationDetailComponent {
    constructor(modal, navParam, api) {
        this.modal = modal;
        this.navParam = navParam;
        this.api = api;
        this.notificaionDetail = '';
    }
    ngOnInit() {
        this.notificaionDetail = this.navParam.get('notifDetail');
    }
    closeModal() {
        this.modal.dismiss();
    }
};
NotificationDetailComponent.ctorParameters = () => [
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_3__.ModalController },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_3__.NavParams },
    { type: _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__.PetcloudApiService }
];
NotificationDetailComponent = (0,tslib__WEBPACK_IMPORTED_MODULE_4__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.Component)({
        selector: 'app-notification-detail',
        template: _raw_loader_notification_detail_component_html__WEBPACK_IMPORTED_MODULE_0__.default,
        styles: [_notification_detail_component_scss__WEBPACK_IMPORTED_MODULE_1__.default]
    })
], NotificationDetailComponent);



/***/ }),

/***/ 22154:
/*!*****************************************************!*\
  !*** ./src/app/notification/notification.module.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NotificationPageModule": function() { return /* binding */ NotificationPageModule; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 38583);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 3679);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/router */ 39895);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _notification_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./notification.page */ 13320);
/* harmony import */ var _notification_detail_notification_detail_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./notification-detail/notification-detail.component */ 81923);








const routes = [
    {
        path: '',
        component: _notification_page__WEBPACK_IMPORTED_MODULE_0__.NotificationPage
    }
];
let NotificationPageModule = class NotificationPageModule {
};
NotificationPageModule = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.NgModule)({
        entryComponents: [_notification_detail_notification_detail_component__WEBPACK_IMPORTED_MODULE_1__.NotificationDetailComponent],
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_4__.CommonModule,
            _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormsModule,
            _ionic_angular__WEBPACK_IMPORTED_MODULE_6__.IonicModule,
            _angular_forms__WEBPACK_IMPORTED_MODULE_5__.ReactiveFormsModule,
            _angular_router__WEBPACK_IMPORTED_MODULE_7__.RouterModule.forChild(routes)
        ],
        declarations: [_notification_page__WEBPACK_IMPORTED_MODULE_0__.NotificationPage, _notification_detail_notification_detail_component__WEBPACK_IMPORTED_MODULE_1__.NotificationDetailComponent]
    })
], NotificationPageModule);



/***/ }),

/***/ 13320:
/*!***************************************************!*\
  !*** ./src/app/notification/notification.page.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NotificationPage": function() { return /* binding */ NotificationPage; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _raw_loader_notification_page_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !raw-loader!./notification.page.html */ 89034);
/* harmony import */ var _notification_page_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./notification.page.scss */ 31435);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/petcloud-api.service */ 78975);
/* harmony import */ var _ionic_storage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ionic/storage */ 38605);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 68939);
/* harmony import */ var _notification_detail_notification_detail_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./notification-detail/notification-detail.component */ 81923);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _notification_setting_notification_setting_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../notification-setting/notification-setting.component */ 12552);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! moment */ 16738);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_5__);











let NotificationPage = class NotificationPage {
    constructor(api, modalCtrl, storage, navCtrl) {
        this.api = api;
        this.modalCtrl = modalCtrl;
        this.storage = storage;
        this.navCtrl = navCtrl;
        this.notificationsData = [];
        this.unreadNotif = 0;
        this.noNotification = false;
        //Pagiantion
        this.offset = 0;
        this.showNotificationButton = false;
        this.showLoadingBubbles = false;
        this.totalNotifications = 0;
        this.isFirstLoad = true;
    }
    ngOnInit() {
    }
    ionViewDidEnter() {
        this.offset = 0;
        this.unreadNotif = 0;
        this.isFirstLoad = true;
        this.getNotifications(this.offset);
    }
    getNotifications(offset) {
        if (offset === 0 && this.isFirstLoad) {
            this.api.showLoader();
            this.isFirstLoad = false;
        }
        this.api.getNotificationsList(offset)
            .pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.finalize)(() => {
            this.api.hideLoader();
        }))
            .subscribe((res) => (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__awaiter)(this, void 0, void 0, function* () {
            this.showLoadingBubbles = false;
            this.totalNotifications = res.total;
            if (res.success === true && res.notifications.length > 0) {
                this.showNotificationButton = true;
                this.noNotification = false;
                var moreNotification = res.notifications;
                const temp = res.notifications;
                if (moreNotification.length == 0) {
                }
                else {
                    for (let i = temp.length - 1; i >= 0; i--) {
                        temp[i].createdate = yield moment__WEBPACK_IMPORTED_MODULE_5__(temp[i].createdate).format("DD MMM YYYY hh:mm A");
                        if (temp[i].readTo == null) {
                            this.unreadNotif++;
                        }
                        this.notificationsData.push(temp[i]);
                    }
                }
            }
            else {
                this.showNotificationButton = false;
                if (this.notificationsData.length == 0) {
                    this.noNotification = true;
                }
                //  this.api.showToast('notifications not found', 2000, 'bottom');
            }
        }), (err) => {
            this.api.autoLogout(err, offset);
        });
    }
    loadData() {
        this.showLoadingBubbles = true;
        this.showNotificationButton = false;
        this.offset = parseInt(this.offset) + 6;
        this.getNotifications(this.offset);
    }
    showNotificaionDetails(notificaionDetails) {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__awaiter)(this, void 0, void 0, function* () {
            const modal = yield this.modalCtrl.create({
                component: _notification_detail_notification_detail_component__WEBPACK_IMPORTED_MODULE_3__.NotificationDetailComponent,
                animated: true,
                componentProps: {
                    notifDetail: notificaionDetails
                }
            });
            if (notificaionDetails.readTo === null) {
                this.api.updateNotificaionReadStatus(notificaionDetails.id)
                    .subscribe((res) => {
                    if (res.success) {
                        notificaionDetails.readTo = moment__WEBPACK_IMPORTED_MODULE_5__().format("YYYY-MM-DD  hh:mm:ss");
                        this.unreadNotif--;
                    }
                }, (err) => {
                    this.api.autoLogout(err, notificaionDetails.id);
                });
            }
            modal.onDidDismiss()
                .then((data) => {
            });
            return yield modal.present();
        });
    }
    deleteMessage(messageId, index) {
        this.api.showAlert('Delete', 'are you sure to delete this notificaion?', [
            {
                text: 'cancel',
                role: 'cancel',
                cssClass: 'danger',
            },
            {
                text: 'Ok',
                handler: () => {
                    this.notificationsData.splice(index, 1);
                    this.api.deleteMessage(messageId)
                        .subscribe((res) => {
                    }, err => {
                        this.api.autoLogout(err, messageId);
                    });
                }
            }
        ]);
    }
    notificationSettings() {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__awaiter)(this, void 0, void 0, function* () {
            const modal = yield this.modalCtrl.create({
                component: _notification_setting_notification_setting_component__WEBPACK_IMPORTED_MODULE_4__.NotificationSettingComponent,
                animated: true,
            });
            modal.onDidDismiss()
                .then((data) => {
            });
            return yield modal.present();
        });
    }
};
NotificationPage.ctorParameters = () => [
    { type: _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__.PetcloudApiService },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_8__.ModalController },
    { type: _ionic_storage__WEBPACK_IMPORTED_MODULE_9__.Storage },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_8__.NavController }
];
NotificationPage = (0,tslib__WEBPACK_IMPORTED_MODULE_7__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_10__.Component)({
        selector: 'app-notification',
        template: _raw_loader_notification_page_html__WEBPACK_IMPORTED_MODULE_0__.default,
        styles: [_notification_page_scss__WEBPACK_IMPORTED_MODULE_1__.default]
    })
], NotificationPage);



/***/ }),

/***/ 64849:
/*!*************************************************************************************!*\
  !*** ./src/app/notification/notification-detail/notification-detail.component.scss ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJub3RpZmljYXRpb24tZGV0YWlsLmNvbXBvbmVudC5zY3NzIn0= */");

/***/ }),

/***/ 31435:
/*!*****************************************************!*\
  !*** ./src/app/notification/notification.page.scss ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("ion-title {\n  padding-top: 5px;\n}\n\nion-content {\n  padding-bottom: calc(env(safe-area-inset-bottom) + 5px);\n}\n\n.notification-item {\n  border-bottom: 1px solid #e1e1e1;\n}\n\n.notification-item .desc {\n  font-size: 14px;\n  color: #4A4A4A;\n  letter-spacing: 0;\n  line-height: 16px;\n}\n\n.notification-item .date {\n  font-size: 12px;\n  color: #888888;\n  letter-spacing: 0;\n}\n\nion-header ion-toolbar {\n  padding-bottom: 5px;\n}\n\n.show-more-btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  padding-bottom: calc(env(safe-area-inset-bottom) + 10px);\n}\n\n.show-more-btn ion-button {\n  width: 95%;\n  --border-radius: 4px;\n  --box-shadow: none;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBQTtBQUNKOztBQUNBO0VBQ0ksdURBQUE7QUFFSjs7QUFBQTtFQVlJLGdDQUFBO0FBUko7O0FBSEk7RUFDSSxlQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0EsaUJBQUE7QUFLUjs7QUFISTtFQUNJLGVBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7QUFLUjs7QUFBQTtFQUNJLG1CQUFBO0FBR0o7O0FBREE7RUFDSSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSx3REFBQTtBQUlKOztBQUhJO0VBQ0ksVUFBQTtFQUNBLG9CQUFBO0VBQ0Esa0JBQUE7QUFLUiIsImZpbGUiOiJub3RpZmljYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXRpdGxlIHtcbiAgICBwYWRkaW5nLXRvcDogNXB4O1xufVxuaW9uLWNvbnRlbnQge1xuICAgIHBhZGRpbmctYm90dG9tOiBjYWxjKGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSArIDVweCk7XG59XG4ubm90aWZpY2F0aW9uLWl0ZW17XG4gICAgLmRlc2N7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgY29sb3I6ICM0QTRBNEE7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwO1xuICAgICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICB9XG4gICAgLmRhdGV7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgY29sb3I6ICM4ODg4ODg7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwO1xuICAgIH0gICAgXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMWUxZTE7XG59XG5cbmlvbi1oZWFkZXIgaW9uLXRvb2xiYXIge1xuICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XG59XG4uc2hvdy1tb3JlLWJ0biB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmctYm90dG9tOiBjYWxjKGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSArIDEwcHgpO1xuICAgIGlvbi1idXR0b24ge1xuICAgICAgICB3aWR0aDogOTUlO1xuICAgICAgICAtLWJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgLS1ib3gtc2hhZG93OiBub25lO1xuICAgIH1cbn0iXX0= */");

/***/ }),

/***/ 71308:
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/notification/notification-detail/notification-detail.component.html ***!
  \***************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-button color=\"danger\" (click)=\"closeModal()\">\n                <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n            </ion-button>\n        </ion-buttons>\n        <ion-title>Details</ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n    <ion-card>\n        <ion-card-header>\n            <ion-card-title class=\"fs-18 ion-text-wrap\" [innerHTML]=\"notificaionDetail?.subject\"></ion-card-title>\n        </ion-card-header>\n        <ion-card-content [innerHTML]=\"notificaionDetail?.message\">\n        </ion-card-content>\n        <ion-item lines=\"none\">\n            <ion-avatar slot=\"start\">\n                <img src=\"/assets/img/support.png\" alt=\"support\">\n            </ion-avatar>\n            <ion-label>\n                <h3>Petcloud Team</h3>\n            </ion-label>\n        </ion-item>\n    </ion-card>\n</ion-content>\n\n");

/***/ }),

/***/ 89034:
/*!*******************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/notification/notification.page.html ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button defaultHref=\"home/tabs/profile-menu\"></ion-back-button>\n        </ion-buttons>\n        <ion-title>\n          Notification \n          <div>\n            <ion-badge [color]=\"unreadNotif > 0 ? 'theme' : 'light'\">\n              {{ unreadNotif}} {{(unreadNotif > 1) ? 'New Messages' : 'New Message' }}\n            </ion-badge>\n          </div>\n          </ion-title>\n        <ion-buttons slot=\"end\">\n            <ion-button (click)=\"notificationSettings()\">\n                <ion-icon slot=\"icon-only\" style=\"height: 2rem; width: 2rem;\" color=\"theme\" mod=\"ios\" name=\"settings\"></ion-icon>\n            </ion-button>\n        </ion-buttons>\n\n        \n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n    <ion-card color=\"theme-sec\" *ngIf=\"noNotification\">\n        <ion-card-content>\n           You don’t have any notifications\n        </ion-card-content>\n    </ion-card>    \n    <ion-list *ngIf=\"notificationsData.length > 0\">\n      <ion-item-sliding *ngFor=\"let notif of notificationsData,let i=index\">\n      \n\n        <ion-item lines=\"none\" slot=\"top\" class=\"notification-item\"   [color]=\" notif?.readTo == null ? 'light' : ''\">\n          <ion-avatar slot=\"start\">\n              <img src=\"/assets/img/support.png\" alt=\"support\">\n          </ion-avatar>\n          <ion-label (click)=\"showNotificaionDetails(notif)\">\n              <h4 [innerHTML]=\"notif?.subject\" class=\"ion-text-wrap desc\"></h4>\n              <ion-text class=\"fs-12 date\">Date : {{notif?.createdate}}</ion-text>\n          </ion-label>\n        </ion-item>\n\n        <ion-item-options slot=\"end\">\n          <ion-item-option color=\"danger\" (click)=\"deleteMessage(notif?.id,i)\">\n            <ion-icon slot=\"icon-only\" name=\"trash\"></ion-icon>\n          </ion-item-option>\n        </ion-item-options>\n      </ion-item-sliding>\n    </ion-list>\n    <div class=\"show-more-btn\">\n      <ion-button *ngIf=\"showNotificationButton\" \n        (click)=\"loadData()\" \n        class=\"text-capitalize fls-0\"\n        color=\"submit-btn\"\n      >\n        Show more notifications\n      </ion-button>\n      <ion-spinner *ngIf=\"showLoadingBubbles\"  name=\"bubbles\"></ion-spinner>\n    </div>\n</ion-content>");

/***/ })

}]);
//# sourceMappingURL=src_app_notification_notification_module_ts-es2015.js.map