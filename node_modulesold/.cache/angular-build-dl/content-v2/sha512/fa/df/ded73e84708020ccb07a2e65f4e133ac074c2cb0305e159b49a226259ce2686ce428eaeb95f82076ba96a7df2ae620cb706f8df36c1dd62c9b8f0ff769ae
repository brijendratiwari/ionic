(self["webpackChunkpetcloud"] = self["webpackChunkpetcloud"] || []).push([["src_app_myListing_listing-photos_listing-photos_module_ts"],{

/***/ 57918:
/*!*******************************************************************!*\
  !*** ./src/app/myListing/listing-photos/listing-photos.module.ts ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ListingPhotosPageModule": function() { return /* binding */ ListingPhotosPageModule; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 38583);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 3679);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/router */ 39895);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _listing_photos_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./listing-photos.page */ 43966);
/* harmony import */ var _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic-native/camera/ngx */ 84267);







// native plugins

const routes = [
    {
        path: '',
        component: _listing_photos_page__WEBPACK_IMPORTED_MODULE_0__.ListingPhotosPage
    }
];
let ListingPhotosPageModule = class ListingPhotosPageModule {
};
ListingPhotosPageModule = (0,tslib__WEBPACK_IMPORTED_MODULE_2__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.NgModule)({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_4__.CommonModule,
            _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormsModule,
            _ionic_angular__WEBPACK_IMPORTED_MODULE_6__.IonicModule,
            _angular_router__WEBPACK_IMPORTED_MODULE_7__.RouterModule.forChild(routes)
        ], providers: [
            _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_1__.Camera,
        ],
        declarations: [_listing_photos_page__WEBPACK_IMPORTED_MODULE_0__.ListingPhotosPage]
    })
], ListingPhotosPageModule);



/***/ }),

/***/ 43966:
/*!*****************************************************************!*\
  !*** ./src/app/myListing/listing-photos/listing-photos.page.ts ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ListingPhotosPage": function() { return /* binding */ ListingPhotosPage; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _raw_loader_listing_photos_page_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !raw-loader!./listing-photos.page.html */ 95350);
/* harmony import */ var _listing_photos_page_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./listing-photos.page.scss */ 98582);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/petcloud-api.service */ 78975);
/* harmony import */ var _ionic_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ionic/storage */ 38605);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _camera_service_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../camera-service.service */ 77836);
/* harmony import */ var _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic-native/camera/ngx */ 84267);










let ListingPhotosPage = class ListingPhotosPage {
    constructor(api, storage, platform, camera, actionSheetCtrl, cameraAPI, navCtrl) {
        this.api = api;
        this.storage = storage;
        this.platform = platform;
        this.camera = camera;
        this.actionSheetCtrl = actionSheetCtrl;
        this.cameraAPI = cameraAPI;
        this.navCtrl = navCtrl;
        this.spacePhotos = [];
        // for image uploading
        this.lastImage = null;
        this.todayDate = new Date();
        this.selectedPetImage = '';
    }
    ngOnInit() {
    }
    ionViewDidEnter() {
        this.getSpacePhotos();
    }
    getSpacePhotos() {
        this.api.showLoader();
        this.api.getListingInfo()
            .subscribe((res) => {
            this.api.hideLoader();
            if (res.success) {
                this.spacePhotos = res.user.spaceImages;
            }
            else {
                this.api.showToast('space images not found! Try again.', 2000, 'bottom');
            }
        }, (err) => {
            this.api.hideLoader();
            this.api.autoLogout(err, "");
        });
    }
    deleteSpaceImage(imageId, imageObj) {
        // show confirm aler box
        this.api.showAlert('Delete Space Photo!', 'are you sure to delete this space photo?', [
            {
                text: 'cancel',
                role: 'cancel',
                cssClass: 'danger',
            },
            {
                text: 'ok',
                handler: () => {
                    this.api.showLoader();
                    this.api.deleteSpaceImage(imageId)
                        .subscribe((res) => {
                        this.api.hideLoader();
                        if (res.success) {
                            for (let i = 0; i < this.spacePhotos.length; i++) {
                                if (this.spacePhotos[i] == imageObj) {
                                    this.spacePhotos.splice(i, 1);
                                }
                            }
                            this.api.showToast('photo deleted successful.', 2000, 'bottom');
                        }
                        else {
                            this.api.showToast('photo not deleted! Try again.', 2000, 'bottom');
                        }
                    }, (err) => {
                        this.api.autoLogout(err, imageId);
                    });
                }
            }
        ]);
    }
    showActionSheet() {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
            const actionSheet = yield this.actionSheetCtrl.create({
                header: 'choose photo from',
                buttons: [{
                        text: 'Camera',
                        icon: 'camera',
                        handler: () => {
                            this.pickImage(this.camera.PictureSourceType.CAMERA);
                        }
                    }, {
                        text: 'Gallery',
                        icon: 'images',
                        handler: () => (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
                            const status = yield this.cameraAPI.checkPhotoLibraryPermission();
                            if (status) {
                                this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY);
                            }
                        })
                    }, {
                        text: 'Cancel',
                        icon: 'close',
                        role: 'cancel',
                    }]
            });
            yield actionSheet.present();
        });
    }
    pickImage(params) {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
            this.cameraAPI.getPicture(params).then(base64 => {
                let imageURL = "data:image/jpeg;base64," + base64;
                this.uploadImageData(imageURL);
            }, err => {
            });
        });
    }
    uploadImageData(imageURL) {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
            let param = {
                data: imageURL,
                name: "imagedata.jpg"
            };
            this.api.showLoader();
            this.api.uploadSpaceImage(param)
                .subscribe(res => {
                this.api.hideLoader();
                if (res['success']) {
                    this.api.showToast('File upload complete now list auto refresh.', 2000, 'bottom');
                    setTimeout(() => {
                        this.getSpacePhotos();
                    }, 2000);
                }
                else {
                    this.api.showToast('File upload failed.', 2000, 'bottom');
                }
            }, (err) => {
                this.api.hideLoader();
                this.api.autoLogout(err, param);
            });
        });
    }
};
ListingPhotosPage.ctorParameters = () => [
    { type: _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_2__.PetcloudApiService },
    { type: _ionic_storage__WEBPACK_IMPORTED_MODULE_6__.Storage },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_7__.Platform },
    { type: _ionic_native_camera_ngx__WEBPACK_IMPORTED_MODULE_4__.Camera },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_7__.ActionSheetController },
    { type: _camera_service_service__WEBPACK_IMPORTED_MODULE_3__.CameraService },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_7__.NavController }
];
ListingPhotosPage = (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_8__.Component)({
        selector: 'app-listing-photos',
        template: _raw_loader_listing_photos_page_html__WEBPACK_IMPORTED_MODULE_0__.default,
        styles: [_listing_photos_page_scss__WEBPACK_IMPORTED_MODULE_1__.default]
    })
], ListingPhotosPage);



/***/ }),

/***/ 98582:
/*!*******************************************************************!*\
  !*** ./src/app/myListing/listing-photos/listing-photos.page.scss ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (".info-card {\n  box-shadow: none;\n}\n\n.photo-content {\n  width: 100%;\n  padding: 10px;\n  padding-bottom: calc(env(safe-area-inset-bottom) + 20px);\n}\n\n.photo-content .header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 5px;\n}\n\n.photo-content .header ion-button {\n  --box-shadow: none;\n  --border-radius: 4px;\n  text-transform: capitalize;\n  font-size: 14px;\n}\n\n.photo-content .header .title-text {\n  font-weight: 500;\n}\n\n.photo-wrapper {\n  display: flex;\n  width: 100%;\n  flex-wrap: wrap;\n}\n\n.photo-wrapper .photo-box {\n  width: calc(100vw/3 - 17px);\n  height: calc(100vw/3 - 17px);\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  overflow: hidden;\n  margin: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.photo-wrapper .photo-box img {\n  -o-object-fit: cover;\n     object-fit: cover;\n  -o-object-position: center;\n     object-position: center;\n}\n\n.photo-wrapper .photo-box ion-icon {\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  font-size: 20px;\n  color: #f44164;\n  background: white;\n  border-radius: 50%;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3RpbmctcGhvdG9zLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxXQUFBO0VBQ0EsYUFBQTtFQUNBLHdEQUFBO0FBRUo7O0FBREk7RUFDSSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtFQUNBLFlBQUE7QUFHUjs7QUFGUTtFQUNJLGtCQUFBO0VBQ0Esb0JBQUE7RUFDQSwwQkFBQTtFQUNBLGVBQUE7QUFJWjs7QUFGUTtFQUNJLGdCQUFBO0FBSVo7O0FBQUE7RUFDSSxhQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7QUFHSjs7QUFGSTtFQUNJLDJCQUFBO0VBQ0EsNEJBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxrQkFBQTtBQUlSOztBQUhRO0VBQ0ksb0JBQUE7S0FBQSxpQkFBQTtFQUNBLDBCQUFBO0tBQUEsdUJBQUE7QUFLWjs7QUFIUTtFQUNJLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLFFBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFLWiIsImZpbGUiOiJsaXN0aW5nLXBob3Rvcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW5mby1jYXJkIHsgICAgXG4gICAgYm94LXNoYWRvdzogbm9uZTtcbn1cbi5waG90by1jb250ZW50IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIHBhZGRpbmctYm90dG9tOiBjYWxjKGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSArIDIwcHgpO1xuICAgIC5oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIHBhZGRpbmc6IDVweDtcbiAgICAgICAgaW9uLWJ1dHRvbiB7XG4gICAgICAgICAgICAtLWJveC1zaGFkb3c6IG5vbmU7XG4gICAgICAgICAgICAtLWJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC50aXRsZS10ZXh0IHtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIH1cbiAgICB9XG59XG4ucGhvdG8td3JhcHBlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgLnBob3RvLWJveCB7XG4gICAgICAgIHdpZHRoOiBjYWxjKDEwMHZ3LzMgLSAxN3B4KTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMHZ3LzMgLSAxN3B4KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBtYXJnaW46IDVweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgaW1nIHtcbiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgICAgICAgICAgb2JqZWN0LXBvc2l0aW9uOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaW9uLWljb24ge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgcmlnaHQ6IDJweDtcbiAgICAgICAgICAgIHRvcDogMnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgICAgICAgY29sb3I6ICNmNDQxNjQ7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0= */");

/***/ }),

/***/ 95350:
/*!*********************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/myListing/listing-photos/listing-photos.page.html ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button defaultHref=\"listing\" ></ion-back-button>\n        </ion-buttons>\n        <ion-title>Listing Photos</ion-title>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n    <ion-card class=\"info-card ion-no-padding\" color=\"note\">\n        <ion-card-header> \n            <ion-card-title>\n            Photo Upload Note\n            </ion-card-title>\n        </ion-card-header>\n        <ion-card-content>\n            <p>Add 1 to 5 photos for your listing. The first image will be your hero banner so this should be a long\n                wide image.</p>\n            <p>The photos you display are important as they tell a Pet Owner about you and your home, yard &\n                services.\n                Pet Owners will want to see where their pet will safely sleep, play, be bathed, groomed or\n                walked.</p>\n            <h5>Photo suggestions</h5>\n            <ul>\n                <li>Ensure they are clear quality photos with good lighting</li>\n                <li>A photo of your yard & fence (where the pet might play)</li>\n                <li>A photo of your Lounge Area (where the pet might sleep)</li>\n                <li>A photo of the Local Dog Park or Foot Path</li>\n                <li>An Action photo of a pet being walked, fed, washed</li>\n            </ul>\n        </ion-card-content>\n    </ion-card>\n    <div class=\"photo-content\">\n        <div class=\"header\">\n            <div class=\"title-text\">\n                Photos\n            </div>\n            <ion-button color=\"theme\" *ngIf=\"spacePhotos.length < 5\" (click)=\"showActionSheet()\">\n                <ion-icon slot=\"start\" name=\"cloud-upload\"></ion-icon>\n                Add\n            </ion-button>\n        </div>\n        <!-- <ion-item *ngFor=\"let sp of spacePhotos\">\n            <ion-thumbnail slot=\"start\">\n            <ion-img\n            [src]=\"sp.imagename == '' || sp.imagename == null  ? \n            'https://dev.petcloud.com.au/img/pet_placeholder.png' \n            : sp.imagename\"></ion-img>\n            </ion-thumbnail>\n            <ion-button slot=\"end\" type=\"button\" color=\"transparent\" (click)=\"deleteSpaceImage(sp.id,sp)\">\n                <ion-icon name=\"trash\" color=\"theme\"></ion-icon>\n            </ion-button>\n        </ion-item> -->\n        <div class=\"photo-wrapper\">\n            <div class=\"photo-box\" *ngFor=\"let sp of spacePhotos\">\n                <img [src]=\"(sp.imagename == '' || sp.imagename == null)? \n                    'https://dev.petcloud.com.au/img/pet_placeholder.png' : sp.imagename\"\n                >\n                <ion-icon (click)=\"deleteSpaceImage(sp.id,sp)\" name=\"close-circle\"></ion-icon>\n            </div>  \n        </div>\n    </div>\n</ion-content>\n");

/***/ })

}]);
//# sourceMappingURL=src_app_myListing_listing-photos_listing-photos_module_ts-es2015.js.map