(self["webpackChunkpetcloud"] = self["webpackChunkpetcloud"] || []).push([["src_app_forceupdate_forceupdate_module_ts"],{

/***/ 68692:
/*!***************************************************!*\
  !*** ./src/app/forceupdate/forceupdate.module.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ForceupdatePageModule": function() { return /* binding */ ForceupdatePageModule; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 38583);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ 3679);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ 39895);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic/angular */ 80476);
/* harmony import */ var _forceupdate_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./forceupdate.page */ 64629);







const routes = [
    {
        path: '',
        component: _forceupdate_page__WEBPACK_IMPORTED_MODULE_0__.ForceupdatePage
    }
];
let ForceupdatePageModule = class ForceupdatePageModule {
};
ForceupdatePageModule = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.NgModule)({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_3__.CommonModule,
            _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormsModule,
            _ionic_angular__WEBPACK_IMPORTED_MODULE_5__.IonicModule,
            _angular_router__WEBPACK_IMPORTED_MODULE_6__.RouterModule.forChild(routes)
        ],
        declarations: [_forceupdate_page__WEBPACK_IMPORTED_MODULE_0__.ForceupdatePage]
    })
], ForceupdatePageModule);



/***/ }),

/***/ 64629:
/*!*************************************************!*\
  !*** ./src/app/forceupdate/forceupdate.page.ts ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ForceupdatePage": function() { return /* binding */ ForceupdatePage; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tslib */ 64762);
/* harmony import */ var _raw_loader_forceupdate_page_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !raw-loader!./forceupdate.page.html */ 17188);
/* harmony import */ var _forceupdate_page_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./forceupdate.page.scss */ 51560);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37716);
/* harmony import */ var _ionic_native_market_ngx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic-native/market/ngx */ 67972);
/* harmony import */ var _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/petcloud-api.service */ 78975);
/* harmony import */ var _ionic_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ionic/storage */ 38605);
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/authentication.service */ 7053);
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ionic/angular */ 80476);









let ForceupdatePage = class ForceupdatePage {
    constructor(market, storage, auth, navCtrl, plt, api) {
        this.market = market;
        this.storage = storage;
        this.auth = auth;
        this.navCtrl = navCtrl;
        this.plt = plt;
        this.api = api;
        this.isSaveLoginKeyPress = "";
    }
    ngOnInit() {
        this.storage.get("isLoggedInKeyPressed").then((isKeyPressed) => {
            this.isSaveLoginKeyPress = isKeyPressed;
            if (isKeyPressed) {
                this.storage.get(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService.USER).then((res) => {
                    this.email = res.email;
                    this.storage.set("email", this.email);
                });
                this.storage.get("password").then((res) => {
                    this.password = res;
                });
            }
        });
    }
    updateApp() {
        return (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
            let appId;
            if (this.plt.is("android")) {
                appId = "com.petcloud.petcloud";
            }
            else {
                appId = "id1539909889";
            }
            yield this.market.open(appId).then((res) => (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
                console.log("market res", res);
                if (res) {
                    this.storage.set("menuType", null);
                    let viewPetJob = localStorage.getItem("viewPetJobs");
                    let trainingDone = localStorage.getItem(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService.TRAININGDONE);
                    let paymentCardData = "";
                    this.storage
                        .get(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService.STRIPECARD)
                        .then((cardData) => {
                        if (cardData != null && cardData !== "") {
                            paymentCardData = cardData;
                        }
                    });
                    localStorage.setItem("token", "");
                    yield this.storage
                        .remove(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService.USER)
                        .then((res) => (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
                        this.api.logoutUser().subscribe((logRes) => (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__awaiter)(this, void 0, void 0, function* () {
                            yield this.storage
                                .remove(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService.USERTOKEN)
                                .then((res) => {
                                console.warn("token removed!");
                            });
                        }), (err) => {
                            // this.api.autoLogout(err);
                        });
                        this.api.hideLoader();
                        this.auth.authState.next(false);
                        yield localStorage.clear();
                        this.storage.set("isLoggedInKeyPressed", false);
                        viewPetJob == "yes"
                            ? localStorage.setItem("viewPetJobs", "yes")
                            : "";
                        trainingDone == "yes"
                            ? localStorage.setItem(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService.TRAININGDONE, "yes")
                            : "";
                        if (paymentCardData != null) {
                            this.storage.set(_api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService.STRIPECARD, paymentCardData);
                        }
                        if (this.isSaveLoginKeyPress) {
                            yield this.storage.set("email", this.email);
                            yield this.storage.set("password", this.password);
                        }
                        else {
                            yield this.storage.set("email", "");
                            yield this.storage.set("password", "");
                        }
                        if (this.isSaveLoginKeyPress) {
                            // this.navCtrl.navigateRoot("/login");
                        }
                        else {
                            // this.navCtrl.navigateRoot("/get-started");
                        }
                    }));
                }
            }));
        });
    }
};
ForceupdatePage.ctorParameters = () => [
    { type: _ionic_native_market_ngx__WEBPACK_IMPORTED_MODULE_2__.Market },
    { type: _ionic_storage__WEBPACK_IMPORTED_MODULE_6__.Storage },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_4__.AuthenticationService },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_7__.NavController },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_7__.Platform },
    { type: _api_petcloud_api_service__WEBPACK_IMPORTED_MODULE_3__.PetcloudApiService }
];
ForceupdatePage = (0,tslib__WEBPACK_IMPORTED_MODULE_5__.__decorate)([
    (0,_angular_core__WEBPACK_IMPORTED_MODULE_8__.Component)({
        selector: 'app-forceupdate',
        template: _raw_loader_forceupdate_page_html__WEBPACK_IMPORTED_MODULE_0__.default,
        styles: [_forceupdate_page_scss__WEBPACK_IMPORTED_MODULE_1__.default]
    })
], ForceupdatePage);



/***/ }),

/***/ 51560:
/*!***************************************************!*\
  !*** ./src/app/forceupdate/forceupdate.page.scss ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("ion-content, ion-toolbar {\n  --background:#FE4164;\n}\n\n.update-screen {\n  padding: 30px;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  max-width: 320px;\n  margin: auto;\n  text-align: center;\n  color: #fff;\n}\n\n.update-screen p {\n  margin: 0;\n  font-size: 12px;\n  margin-top: 30px;\n  opacity: 0.7;\n}\n\n.update-screen h4 {\n  margin: 0;\n  margin-top: 30px;\n  font-size: 18px;\n  margin-bottom: 30px;\n  line-height: 1.6;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcmNldXBkYXRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG9CQUFBO0FBQ0o7O0FBQ0E7RUFDSSxhQUFBO0VBQ0EsYUFBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7QUFFSjs7QUFESTtFQUNJLFNBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxZQUFBO0FBR1I7O0FBREk7RUFDSSxTQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7RUFDQSxnQkFBQTtBQUdSIiwiZmlsZSI6ImZvcmNldXBkYXRlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50LCBpb24tdG9vbGJhcntcbiAgICAtLWJhY2tncm91bmQ6I0ZFNDE2NDtcbn1cbi51cGRhdGUtc2NyZWVue1xuICAgIHBhZGRpbmc6IDMwcHg7XG4gICAgaGVpZ2h0OiAxMDB2aDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBtYXgtd2lkdGg6IDMyMHB4O1xuICAgIG1hcmdpbjogYXV0bztcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgcHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICB9XG4gICAgaDR7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgIH1cbn0iXX0= */");

/***/ }),

/***/ 17188:
/*!*****************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/forceupdate/forceupdate.page.html ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<!-- <ion-header>\n  <ion-toolbar>\n    <ion-title>forceupdate</ion-title>\n  </ion-toolbar>\n</ion-header> -->\n\n<ion-content>\n  <div class=\"update-screen\">\n    <img src=\"../../assets/img/monogram.svg\" alt=\"\">\n    <p>\n      We have tightened some nuts n' bolts behind the screens so that we can make PetCloud better.\n    </p>\n    <h4>Please click on Update button to update the App</h4>\n    <ion-button fill=\"solid\" color=\"white\" shape=\"round\" size=\"large\" class=\"theme-btn\" (click)=\"updateApp()\">\n      Update for Free \n    </ion-button>\n  </div>\n  \n</ion-content>\n");

/***/ })

}]);
//# sourceMappingURL=src_app_forceupdate_forceupdate_module_ts-es2015.js.map